{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/kurohagi/pg/coens-labpicker-25/src/lib/supabase.ts"],"sourcesContent":["import { createBrowserClient } from '@supabase/ssr';\nimport { Database } from '@/types/supabase';\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!;\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!;\n\n// createClient ではなく createBrowserClient を使用\nexport const supabase = createBrowserClient<Database>(\n  supabaseUrl, \n  supabaseAnonKey\n);"],"names":[],"mappings":";;;;AAGoB;AAHpB;AAAA;;AAGA,MAAM;AACN,MAAM;AAGC,MAAM,WAAW,IAAA,oMAAmB,EACzC,aACA"}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Users/kurohagi/pg/coens-labpicker-25/src/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport Link from 'next/link';\nimport { supabase } from '@/lib/supabase';\nimport { motion } from 'framer-motion';\n\nexport default function LoginPage() {\n  const router = useRouter();\n  const [isLogin, setIsLogin] = useState(true);\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [agreeTerms, setAgreeTerms] = useState(false);\n  const [message, setMessage] = useState<{ text: string; type: 'success' | 'error' | 'info' | null }>({\n    text: '',\n    type: null,\n  });\n\n  // セッション確認（既にログイン済みならダッシュボードへ）\n  useEffect(() => {\n    const checkSession = async () => {\n      const { data: { session } } = await supabase.auth.getSession();\n      if (session?.user.email?.endsWith('@u.tsukuba.ac.jp')) {\n        router.refresh(); // セッションがある場合は念のためリフレッシュ\n        router.push('/dashboard');\n      }\n    };\n    checkSession();\n  }, [router]);\n\n  const showMessage = (text: string, type: 'success' | 'error' | 'info') => {\n    setMessage({ text, type });\n  };\n\n  const handleLogin = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!email.endsWith('@u.tsukuba.ac.jp')) {\n      showMessage('筑波大学のメールアドレス (@u.tsukuba.ac.jp) を使用してください', 'error');\n      return;\n    }\n\n    showMessage('ログイン中...', 'info');\n    const { error } = await supabase.auth.signInWithPassword({ email, password });\n\n    if (error) {\n      showMessage('ログイン失敗: ' + error.message, 'error');\n    } else {\n      showMessage('ログイン成功！リダイレクト中...', 'success');\n      // 重要: Cookieをサーバーに認識させるためにリフレッシュする\n      router.refresh();\n      setTimeout(() => router.push('/dashboard'), 500);\n    }\n  };\n\n  const handleSignup = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!email.endsWith('@u.tsukuba.ac.jp')) {\n      showMessage('筑波大学のメールアドレス (@u.tsukuba.ac.jp) を使用してください', 'error');\n      return;\n    }\n    if (!agreeTerms) {\n      showMessage('利用規約に同意してください', 'error');\n      return;\n    }\n\n    showMessage('登録中...', 'info');\n    const { error } = await supabase.auth.signUp({ email, password });\n\n    if (error) {\n      showMessage('登録失敗: ' + error.message, 'error');\n    } else {\n      showMessage('登録成功！確認メールを送信しました。', 'success');\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen flex flex-col md:flex-row font-sans\">\n      {/* 左側：ビジュアルセクション */}\n      <motion.div \n        initial={{ opacity: 0, x: -20 }}\n        animate={{ opacity: 1, x: 0 }}\n        className=\"md:w-1/2 bg-[#85BCC7] p-12 flex flex-col justify-between text-white relative overflow-hidden\"\n      >\n        <div className=\"relative z-10\">\n          <h1 className=\"text-6xl md:text-8xl leading-none mb-8 font-serif\">\n            Coens<br />Lab<br />Picker\n          </h1>\n          <div className=\"w-20 h-1 bg-white mb-8\" />\n          <p className=\"text-lg font-light tracking-widest uppercase\">2025 Edition</p>\n        </div>\n        \n        {/* 装飾的な背景円 */}\n        <div className=\"absolute -bottom-20 -right-20 w-96 h-96 bg-white/10 rounded-full blur-3xl pointer-events-none\" />\n\n        <p className=\"text-sm opacity-80 max-w-xs leading-relaxed relative z-10\">\n          筑波大学 理工学群応用理工学類<br />研究室配属支援システム\n        </p>\n      </motion.div>\n\n      {/* 右側：フォームセクション */}\n      <div className=\"md:w-1/2 flex items-center justify-center p-8 md:p-24 bg-[#fdfdfd]\">\n        <motion.div \n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.2 }}\n          className=\"w-full max-w-md\"\n        >\n          <h2 className=\"text-3xl mb-2 text-[#1a2c2f] font-serif\">\n            {isLogin ? \"Welcome back\" : \"Create account\"}\n          </h2>\n          <p className=\"text-xs text-[#5e7175] mb-10 tracking-wide\">\n            {isLogin ? \"アカウントにログインしてください\" : \"新規アカウントを作成します\"}\n          </p>\n          \n          <form onSubmit={isLogin ? handleLogin : handleSignup} className=\"space-y-8\">\n            <div className=\"group\">\n              <label className=\"text-xs uppercase tracking-widest text-[#5e7175] group-focus-within:text-[#85BCC7] transition-colors block mb-2\">\n                University Email\n              </label>\n              <input \n                type=\"email\" \n                className=\"w-full bg-transparent border-b-2 border-gray-200 py-3 px-2 transition-all duration-300 focus:outline-none focus:border-[#85BCC7] text-[#1a2c2f]\"\n                placeholder=\"s2xxxxx@u.tsukuba.ac.jp\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                required\n                pattern=\".*@u\\.tsukuba\\.ac\\.jp$\"\n              />\n            </div>\n            \n            <div className=\"group\">\n              <label className=\"text-xs uppercase tracking-widest text-[#5e7175] group-focus-within:text-[#85BCC7] transition-colors block mb-2\">\n                Password\n              </label>\n              <input \n                type=\"password\" \n                className=\"w-full bg-transparent border-b-2 border-gray-200 py-3 px-2 transition-all duration-300 focus:outline-none focus:border-[#85BCC7] text-[#1a2c2f]\"\n                placeholder=\"••••••\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                required\n                minLength={6}\n              />\n            </div>\n\n            {/* 新規登録時のみ表示する利用規約チェックボックス */}\n            {!isLogin && (\n              <div className=\"flex items-center gap-3 py-2\">\n                <input \n                  type=\"checkbox\" \n                  id=\"agree-terms\"\n                  checked={agreeTerms}\n                  onChange={(e) => setAgreeTerms(e.target.checked)}\n                  className=\"w-4 h-4 text-[#85BCC7] border-gray-300 rounded focus:ring-[#85BCC7]\"\n                />\n                <label htmlFor=\"agree-terms\" className=\"text-xs text-[#5e7175]\">\n                  <Link href=\"/terms\" target=\"_blank\" className=\"text-[#85BCC7] hover:underline underline-offset-2\">\n                    利用規約\n                  </Link>\n                  に同意します\n                </label>\n              </div>\n            )}\n\n            <button \n              type=\"submit\" \n              className=\"relative w-full overflow-hidden bg-[#85BCC7] text-white py-4 text-xs font-bold tracking-[0.2em] uppercase hover:bg-[#74a5af] transition-colors shadow-lg shadow-[#85BCC7]/20\"\n            >\n              {isLogin ? \"Login\" : \"Sign Up\"}\n            </button>\n          </form>\n\n          {/* メッセージ表示エリア */}\n          {message.text && (\n            <motion.div \n              initial={{ opacity: 0, y: 10 }}\n              animate={{ opacity: 1, y: 0 }}\n              className={`mt-6 p-4 text-xs text-center border-l-2 ${\n                message.type === 'success' ? 'bg-[#e7f2f4] border-[#85BCC7] text-[#1a2c2f]' :\n                message.type === 'error' ? 'bg-red-50 border-red-400 text-red-800' :\n                'bg-gray-50 border-gray-400 text-gray-800'\n              }`}\n            >\n              {message.text}\n            </motion.div>\n          )}\n\n          <div className=\"mt-12 flex justify-between items-center text-xs text-[#5e7175] border-t border-gray-100 pt-8\">\n            <button onClick={() => {\n              setIsLogin(!isLogin);\n              setMessage({ text: '', type: null });\n            }} className=\"hover:text-[#85BCC7] transition-colors uppercase tracking-wider\">\n              {isLogin ? \"Create an account\" : \"Back to login\"}\n            </button>\n            <Link href=\"/reset-password\" className=\"hover:text-[#85BCC7] transition-colors\">\n              Forgot password?\n            </Link>\n          </div>\n        </motion.div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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"}}]
}